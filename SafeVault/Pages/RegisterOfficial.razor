@page "/registerOfficial"
@inject HttpClient Http

<h2>Register</h2>
<div>
    <label>Username:</label>
    <input @bind="Username" />
</div>
<div>
    <label>Password:</label>
    <input type="password" @bind="Password" />
</div>
<div>
    <button @onclick="RegisterUser">Register</button>
</div>
<p>@ErrorMessage</p>

@code {
    private string Username { get; set; }
    private string Password { get; set; }
    private string ErrorMessage { get; set; }

    private async Task RegisterUser()
    {
        var user = new
        {
            Username,
            HashedPassword = Password
        };

        try
        {
            var response = await Http.PostAsJsonAsync("api/auth/register", user);
            if (response.IsSuccessStatusCode)
            {
                ErrorMessage = "User registered successfully!";
            }
            else
            {
                var error = await response.Content.ReadAsStringAsync();
                ErrorMessage = $"Registration failed: {error}";
            }
        }
        catch (Exception ex)
        {
            ErrorMessage = $"An error occurred: {ex.Message}";
        }
    }
}